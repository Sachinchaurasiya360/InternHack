/**
 * Job Application Model
 * Tracks applications submitted to job postings
 */

model JobApplication {
    id            String               @id @default(uuid())
    status        JobApplicationStatus @default(PENDING)
    coverLetter   String?              @db.Text
    customAnswers Json? // Store custom question answers
    createdAt     DateTime             @default(now())
    updatedAt     DateTime             @updatedAt

    applicantId String
    applicant   User   @relation(fields: [applicantId], references: [id], onDelete: Cascade)

    jobId String
    job   InternshipOrJob @relation(fields: [jobId], references: [id], onDelete: Cascade)

    @@unique([applicantId, jobId]) // One application per user per job
    @@index([jobId])
    @@index([applicantId])
    @@index([status])
}

enum JobApplicationStatus {
    PENDING
    REVIEWING
    SHORTLISTED
    INTERVIEWED
    OFFERED
    REJECTED
    ACCEPTED
    WITHDRAWN
}
